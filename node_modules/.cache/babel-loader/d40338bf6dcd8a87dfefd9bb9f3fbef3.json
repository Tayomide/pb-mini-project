{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Tomiwa/Projects/pb-mini-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"C:/Users/Tomiwa/Projects/pb-mini-project/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Tomiwa/Projects/pb-mini-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Tomiwa/Projects/pb-mini-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Box from'./Box.js';import'./Compare.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Compare=function Compare(_ref){var selected=_ref.selected,setSelected=_ref.setSelected,setComparing=_ref.setComparing;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),selObj=_useState2[0],setSelObj=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),closeCompare=_useState4[0],setCloseCompare=_useState4[1];var mouseDownPos=null;var initTop=null;var handleMouseDown=function handleMouseDown(event){if(event.target.classList.contains(\"checked-box\")){mouseDownPos=event.target.parentElement.children[0];mouseDownPos.style.position=\"fixed\";mouseDownPos.style.zIndex=2;initTop=mouseDownPos.parentElement.getBoundingClientRect().y+mouseDownPos.parentElement.getBoundingClientRect().height-mouseDownPos.getBoundingClientRect().height;mouseDownPos.style.top=event.clientY-mouseDownPos.getBoundingClientRect().height/2+\"px\";mouseDownPos.style.left=event.clientX-mouseDownPos.getBoundingClientRect().width/2+\"px\";}window.addEventListener(\"mousemove\",handleDrag);};var handleDrag=function handleDrag(event){if(mouseDownPos){mouseDownPos.style.top=event.clientY-mouseDownPos.getBoundingClientRect().height/2+\"px\";mouseDownPos.style.left=event.clientX-mouseDownPos.getBoundingClientRect().width/2+\"px\";}};var handleMouseUp=function handleMouseUp(event){window.removeEventListener(\"mousemove\",handleDrag);if(event.target.classList.contains(\"checked-box\")&&mouseDownPos){var newGCS=event.target.parentElement.style.gridColumn.split(' / ')[0];var initGCS=mouseDownPos.parentElement.style.gridColumn.split(' / ')[0];var initLeft=mouseDownPos.parentElement.getBoundingClientRect().x;mouseDownPos.style.transition=\"0.2s ease-in-out\";mouseDownPos.style.left=event.target.parentElement.getBoundingClientRect().x+\"px\";mouseDownPos.style.top=initTop+\"px\";event.target.parentElement.children[0].style.transition=\"0.2s ease-in-out\";event.target.parentElement.children[0].style.position=\"fixed\";event.target.parentElement.children[0].style.left=initLeft+\"px\";setTimeout(function(){var _objectSpread2;event.target.parentElement.children[0].style.transition=\"none\";mouseDownPos.style.transition=\"none\";setSelObj(_objectSpread(_objectSpread({},selObj),{},(_objectSpread2={},_defineProperty(_objectSpread2,event.target.parentElement.dataset.index,_objectSpread(_objectSpread({},selObj[event.target.parentElement.dataset.index]),{},{position:parseInt(initGCS)-1})),_defineProperty(_objectSpread2,mouseDownPos.parentElement.dataset.index,_objectSpread(_objectSpread({},selObj[mouseDownPos.parentElement.dataset.index]),{},{position:parseInt(newGCS)-1})),_objectSpread2)));},200);mouseDownPos.style.zIndex=1;}else if(mouseDownPos){mouseDownPos.style.position=\"revert\";}};useEffect(function(){var obj={};var sortable=[];console.log(Math.max.apply(Math,_toConsumableArray(Object.values(selected))));for(var item in selected){sortable.push([item,selected[item]]);}sortable.sort(function(a,b){return parseInt(a[1])-parseInt(b[1]);});console.log(\"sortable\",sortable);// let objSorted = {}\n// let index = 1\n// sortable.forEach(function(item){\n//     objSorted[index]=item[1]\n//     index += 1 \n// })\n// console.log(\"objSorted\",objSorted)\n// setSelected(objSorted)\nfor(var i=0;i<sortable.length;i++){console.log(sortable[i][1]);obj[i+1]={\"position\":i,\"data\":sortable[i][1]};}setSelObj(function(prevSelObj){return obj;});console.log(\"selObj\",selObj);console.log(\"selObj\",selObj,obj,sortable);},[]);return/*#__PURE__*/_jsx(\"section\",{className:\"overlay \".concat(closeCompare?'close':''),onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,children:/*#__PURE__*/_jsxs(\"section\",{className:\"compare-window\",dragger:\"dragger\",style:{\"--selected-length\":\"\".concat(Object.keys(selected).length),\"--max-height\":\"calc(100vh - 80px)\"},onMouseDown:handleMouseDown,children:[Object.keys(selObj).map(function(i){return/*#__PURE__*/_jsx(Box,{index:i,position:selObj[i][\"position\"],data:selObj[i][\"data\"],selected:selected,showCheckBox:false,maxHeight:\"\".concat(Math.max.apply(Math,_toConsumableArray(Object.values(selected)))+4,\"px\")},i);}),/*#__PURE__*/_jsx(\"button\",{className:\"close-compare\",onClick:function onClick(){setCloseCompare(true);setTimeout(function(){setComparing(false);},400);},children:/*#__PURE__*/_jsx(\"p\",{children:\"+\"})})]})});};export default Compare;","map":{"version":3,"names":["React","useState","useEffect","Box","Compare","selected","setSelected","setComparing","selObj","setSelObj","closeCompare","setCloseCompare","mouseDownPos","initTop","handleMouseDown","event","target","classList","contains","parentElement","children","style","position","zIndex","getBoundingClientRect","y","height","top","clientY","left","clientX","width","window","addEventListener","handleDrag","handleMouseUp","removeEventListener","newGCS","gridColumn","split","initGCS","initLeft","x","transition","setTimeout","dataset","index","parseInt","obj","sortable","console","log","Math","max","Object","values","item","push","sort","a","b","i","length","prevSelObj","keys","map"],"sources":["C:/Users/Tomiwa/Projects/pb-mini-project/src/components/Compare.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Box from './Box.js'\nimport './Compare.css'\n\nconst Compare = ({ selected, setSelected, setComparing }) => {\n  const [selObj, setSelObj] = useState({})\n  const [closeCompare, setCloseCompare] = useState(false)\n\n  var mouseDownPos = null\n  var initTop = null\n  const handleMouseDown = (event) => {\n    if (event.target.classList.contains(\"checked-box\")) {\n      mouseDownPos = event.target.parentElement.children[0]\n      mouseDownPos.style.position = \"fixed\"\n      mouseDownPos.style.zIndex = 2\n      initTop = mouseDownPos.parentElement.getBoundingClientRect().y \n        + mouseDownPos.parentElement.getBoundingClientRect().height\n        - mouseDownPos.getBoundingClientRect().height\n      mouseDownPos.style.top = event.clientY - mouseDownPos.getBoundingClientRect().height/2 + \"px\";\n      mouseDownPos.style.left = event.clientX - mouseDownPos.getBoundingClientRect().width/2 + \"px\";\n    }\n    window.addEventListener(\"mousemove\", handleDrag)\n  }\n  const handleDrag = (event) => {\n    if (mouseDownPos) {\n      mouseDownPos.style.top = event.clientY - mouseDownPos.getBoundingClientRect().height/2 + \"px\"\n      mouseDownPos.style.left = event.clientX - mouseDownPos.getBoundingClientRect().width/2 + \"px\";\n    }\n  }\n  const handleMouseUp = (event) => {\n    window.removeEventListener(\"mousemove\", handleDrag)\n    if (event.target.classList.contains(\"checked-box\") && mouseDownPos) {\n      var newGCS = event.target.parentElement.style.gridColumn.split(' / ')[0]\n      var initGCS = mouseDownPos.parentElement.style.gridColumn.split(' / ')[0]\n\n      var initLeft = mouseDownPos.parentElement.getBoundingClientRect().x\n\n      mouseDownPos.style.transition = \"0.2s ease-in-out\"\n      mouseDownPos.style.left = event.target.parentElement.getBoundingClientRect().x + \"px\"\n      mouseDownPos.style.top = initTop + \"px\"\n\n      event.target.parentElement.children[0].style.transition = \"0.2s ease-in-out\"\n      event.target.parentElement.children[0].style.position = \"fixed\"\n      event.target.parentElement.children[0].style.left = initLeft + \"px\"\n      setTimeout(() => {\n        event.target.parentElement.children[0].style.transition = \"none\"\n        mouseDownPos.style.transition = \"none\"\n        setSelObj({...selObj, \n          [event.target.parentElement.dataset.index]: {...selObj[event.target.parentElement.dataset.index], \n            position: parseInt(initGCS)-1}, \n            [mouseDownPos.parentElement.dataset.index]: {...selObj[mouseDownPos.parentElement.dataset.index], \n              position: parseInt(newGCS)-1}})        \n      }, 200)\n            \n      mouseDownPos.style.zIndex = 1\n    }\n    else if (mouseDownPos) {\n      mouseDownPos.style.position = \"revert\";\n    }\n  }\n  useEffect(()=> {\n    let obj = {}\n    let sortable = [];\n    console.log(Math.max(...Object.values(selected)))\n    for (var item in selected) {\n        sortable.push([item, selected[item]]);\n    }\n\n    sortable.sort(function(a, b) {\n        return parseInt(a[1]) - parseInt(b[1]);\n    });\n    console.log(\"sortable\",sortable)\n    // let objSorted = {}\n    // let index = 1\n    // sortable.forEach(function(item){\n    //     objSorted[index]=item[1]\n    //     index += 1 \n    // })\n    // console.log(\"objSorted\",objSorted)\n    // setSelected(objSorted)\n    for (var i=0; i < sortable.length; i++) {\n      console.log(sortable[i][1])\n      obj[i + 1] = {\"position\": i, \"data\": sortable[i][1]}\n    }\n    setSelObj((prevSelObj) => {return obj})\n    console.log(\"selObj\" , selObj)\n    console.log(\"selObj\",selObj, obj, sortable)\n  }, [])\n  \n  \n  \n  return (\n    <section className={`overlay ${closeCompare ? 'close' : '' }`} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp}>\n        <section className='compare-window' dragger=\"dragger\" \n        style={{\"--selected-length\": `${Object.keys(selected).length}`,\n        \"--max-height\": `calc(100vh - 80px)`\n      }}\n        onMouseDown={handleMouseDown}>\n            {Object.keys(selObj).map((i) => {\n                return <Box key={i} index={i} position={selObj[i][\"position\"]} data={selObj[i][\"data\"]} selected={selected} \n                showCheckBox={false} maxHeight={`${Math.max(...Object.values(selected)) + 4}px`}/>\n            })}\n            <button className=\"close-compare\" onClick={() => {\n              setCloseCompare(true);\n              setTimeout(()=>{setComparing(false)}, 400)\n              }}><p>+</p></button>\n        </section>\n    </section>\n  )\n}\n\nexport default Compare"],"mappings":"igBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,IAAP,KAAgB,UAAhB,CACA,MAAO,eAAP,C,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,MAA6C,IAA1CC,SAA0C,MAA1CA,QAA0C,CAAhCC,WAAgC,MAAhCA,WAAgC,CAAnBC,YAAmB,MAAnBA,YAAmB,CAC3D,cAA4BN,QAAQ,CAAC,EAAD,CAApC,wCAAOO,MAAP,eAAeC,SAAf,eACA,eAAwCR,QAAQ,CAAC,KAAD,CAAhD,yCAAOS,YAAP,eAAqBC,eAArB,eAEA,GAAIC,aAAY,CAAG,IAAnB,CACA,GAAIC,QAAO,CAAG,IAAd,CACA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,KAAD,CAAW,CACjC,GAAIA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,QAAvB,CAAgC,aAAhC,CAAJ,CAAoD,CAClDN,YAAY,CAAGG,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2BC,QAA3B,CAAoC,CAApC,CAAf,CACAR,YAAY,CAACS,KAAb,CAAmBC,QAAnB,CAA8B,OAA9B,CACAV,YAAY,CAACS,KAAb,CAAmBE,MAAnB,CAA4B,CAA5B,CACAV,OAAO,CAAGD,YAAY,CAACO,aAAb,CAA2BK,qBAA3B,GAAmDC,CAAnD,CACNb,YAAY,CAACO,aAAb,CAA2BK,qBAA3B,GAAmDE,MAD7C,CAENd,YAAY,CAACY,qBAAb,GAAqCE,MAFzC,CAGAd,YAAY,CAACS,KAAb,CAAmBM,GAAnB,CAAyBZ,KAAK,CAACa,OAAN,CAAgBhB,YAAY,CAACY,qBAAb,GAAqCE,MAArC,CAA4C,CAA5D,CAAgE,IAAzF,CACAd,YAAY,CAACS,KAAb,CAAmBQ,IAAnB,CAA0Bd,KAAK,CAACe,OAAN,CAAgBlB,YAAY,CAACY,qBAAb,GAAqCO,KAArC,CAA2C,CAA3D,CAA+D,IAAzF,CACD,CACDC,MAAM,CAACC,gBAAP,CAAwB,WAAxB,CAAqCC,UAArC,EACD,CAZD,CAaA,GAAMA,WAAU,CAAG,QAAbA,WAAa,CAACnB,KAAD,CAAW,CAC5B,GAAIH,YAAJ,CAAkB,CAChBA,YAAY,CAACS,KAAb,CAAmBM,GAAnB,CAAyBZ,KAAK,CAACa,OAAN,CAAgBhB,YAAY,CAACY,qBAAb,GAAqCE,MAArC,CAA4C,CAA5D,CAAgE,IAAzF,CACAd,YAAY,CAACS,KAAb,CAAmBQ,IAAnB,CAA0Bd,KAAK,CAACe,OAAN,CAAgBlB,YAAY,CAACY,qBAAb,GAAqCO,KAArC,CAA2C,CAA3D,CAA+D,IAAzF,CACD,CACF,CALD,CAMA,GAAMI,cAAa,CAAG,QAAhBA,cAAgB,CAACpB,KAAD,CAAW,CAC/BiB,MAAM,CAACI,mBAAP,CAA2B,WAA3B,CAAwCF,UAAxC,EACA,GAAInB,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,QAAvB,CAAgC,aAAhC,GAAkDN,YAAtD,CAAoE,CAClE,GAAIyB,OAAM,CAAGtB,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2BE,KAA3B,CAAiCiB,UAAjC,CAA4CC,KAA5C,CAAkD,KAAlD,EAAyD,CAAzD,CAAb,CACA,GAAIC,QAAO,CAAG5B,YAAY,CAACO,aAAb,CAA2BE,KAA3B,CAAiCiB,UAAjC,CAA4CC,KAA5C,CAAkD,KAAlD,EAAyD,CAAzD,CAAd,CAEA,GAAIE,SAAQ,CAAG7B,YAAY,CAACO,aAAb,CAA2BK,qBAA3B,GAAmDkB,CAAlE,CAEA9B,YAAY,CAACS,KAAb,CAAmBsB,UAAnB,CAAgC,kBAAhC,CACA/B,YAAY,CAACS,KAAb,CAAmBQ,IAAnB,CAA0Bd,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2BK,qBAA3B,GAAmDkB,CAAnD,CAAuD,IAAjF,CACA9B,YAAY,CAACS,KAAb,CAAmBM,GAAnB,CAAyBd,OAAO,CAAG,IAAnC,CAEAE,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2BC,QAA3B,CAAoC,CAApC,EAAuCC,KAAvC,CAA6CsB,UAA7C,CAA0D,kBAA1D,CACA5B,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2BC,QAA3B,CAAoC,CAApC,EAAuCC,KAAvC,CAA6CC,QAA7C,CAAwD,OAAxD,CACAP,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2BC,QAA3B,CAAoC,CAApC,EAAuCC,KAAvC,CAA6CQ,IAA7C,CAAoDY,QAAQ,CAAG,IAA/D,CACAG,UAAU,CAAC,UAAM,oBACf7B,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2BC,QAA3B,CAAoC,CAApC,EAAuCC,KAAvC,CAA6CsB,UAA7C,CAA0D,MAA1D,CACA/B,YAAY,CAACS,KAAb,CAAmBsB,UAAnB,CAAgC,MAAhC,CACAlC,SAAS,gCAAKD,MAAL,uDACNO,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2B0B,OAA3B,CAAmCC,KAD7B,gCACyCtC,MAAM,CAACO,KAAK,CAACC,MAAN,CAAaG,aAAb,CAA2B0B,OAA3B,CAAmCC,KAApC,CAD/C,MAELxB,QAAQ,CAAEyB,QAAQ,CAACP,OAAD,CAAR,CAAkB,CAFvB,mCAGJ5B,YAAY,CAACO,aAAb,CAA2B0B,OAA3B,CAAmCC,KAH/B,gCAG2CtC,MAAM,CAACI,YAAY,CAACO,aAAb,CAA2B0B,OAA3B,CAAmCC,KAApC,CAHjD,MAIHxB,QAAQ,CAAEyB,QAAQ,CAACV,MAAD,CAAR,CAAiB,CAJxB,qBAAT,CAKD,CARS,CAQP,GARO,CAAV,CAUAzB,YAAY,CAACS,KAAb,CAAmBE,MAAnB,CAA4B,CAA5B,CACD,CAxBD,IAyBK,IAAIX,YAAJ,CAAkB,CACrBA,YAAY,CAACS,KAAb,CAAmBC,QAAnB,CAA8B,QAA9B,CACD,CACF,CA9BD,CA+BApB,SAAS,CAAC,UAAK,CACb,GAAI8C,IAAG,CAAG,EAAV,CACA,GAAIC,SAAQ,CAAG,EAAf,CACAC,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,GAAL,OAAAD,IAAI,oBAAQE,MAAM,CAACC,MAAP,CAAclD,QAAd,CAAR,EAAhB,EACA,IAAK,GAAImD,KAAT,GAAiBnD,SAAjB,CAA2B,CACvB4C,QAAQ,CAACQ,IAAT,CAAc,CAACD,IAAD,CAAOnD,QAAQ,CAACmD,IAAD,CAAf,CAAd,EACH,CAEDP,QAAQ,CAACS,IAAT,CAAc,SAASC,CAAT,CAAYC,CAAZ,CAAe,CACzB,MAAOb,SAAQ,CAACY,CAAC,CAAC,CAAD,CAAF,CAAR,CAAiBZ,QAAQ,CAACa,CAAC,CAAC,CAAD,CAAF,CAAhC,CACH,CAFD,EAGAV,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAuBF,QAAvB,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAK,GAAIY,EAAC,CAAC,CAAX,CAAcA,CAAC,CAAGZ,QAAQ,CAACa,MAA3B,CAAmCD,CAAC,EAApC,CAAwC,CACtCX,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACY,CAAD,CAAR,CAAY,CAAZ,CAAZ,EACAb,GAAG,CAACa,CAAC,CAAG,CAAL,CAAH,CAAa,CAAC,WAAYA,CAAb,CAAgB,OAAQZ,QAAQ,CAACY,CAAD,CAAR,CAAY,CAAZ,CAAxB,CAAb,CACD,CACDpD,SAAS,CAAC,SAACsD,UAAD,CAAgB,CAAC,MAAOf,IAAP,CAAW,CAA7B,CAAT,CACAE,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAuB3C,MAAvB,EACA0C,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAqB3C,MAArB,CAA6BwC,GAA7B,CAAkCC,QAAlC,EACD,CA3BQ,CA2BN,EA3BM,CAAT,CA+BA,mBACE,gBAAS,SAAS,mBAAavC,YAAY,CAAG,OAAH,CAAa,EAAtC,CAAlB,CAA+D,SAAS,CAAEyB,aAA1E,CAAyF,YAAY,CAAEA,aAAvG,uBACI,iBAAS,SAAS,CAAC,gBAAnB,CAAoC,OAAO,CAAC,SAA5C,CACA,KAAK,CAAE,CAAC,8BAAwBmB,MAAM,CAACU,IAAP,CAAY3D,QAAZ,EAAsByD,MAA9C,CAAD,CACP,mCADO,CADP,CAIA,WAAW,CAAEhD,eAJb,WAKKwC,MAAM,CAACU,IAAP,CAAYxD,MAAZ,EAAoByD,GAApB,CAAwB,SAACJ,CAAD,CAAO,CAC5B,mBAAO,KAAC,GAAD,EAAa,KAAK,CAAEA,CAApB,CAAuB,QAAQ,CAAErD,MAAM,CAACqD,CAAD,CAAN,CAAU,UAAV,CAAjC,CAAwD,IAAI,CAAErD,MAAM,CAACqD,CAAD,CAAN,CAAU,MAAV,CAA9D,CAAiF,QAAQ,CAAExD,QAA3F,CACP,YAAY,CAAE,KADP,CACc,SAAS,WAAK+C,IAAI,CAACC,GAAL,OAAAD,IAAI,oBAAQE,MAAM,CAACC,MAAP,CAAclD,QAAd,CAAR,EAAJ,CAAuC,CAA5C,MADvB,EAAUwD,CAAV,CAAP,CAEH,CAHA,CALL,cASI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,kBAAM,CAC/ClD,eAAe,CAAC,IAAD,CAAf,CACAiC,UAAU,CAAC,UAAI,CAACrC,YAAY,CAAC,KAAD,CAAZ,CAAoB,CAA1B,CAA4B,GAA5B,CAAV,CACC,CAHH,uBAGK,wBAHL,EATJ,GADJ,EADF,CAkBD,CAzGD,CA2GA,cAAeH,QAAf"},"metadata":{},"sourceType":"module"}